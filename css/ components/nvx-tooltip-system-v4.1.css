/*======================================*/
/* ⚡ NEVOX TOOLTIP SYSTEM v4.1          */
/* ENTERPRISE-GRADE • PRODUCTION-READY  */
/* WCAG 2.1 AAA • SECTION 508 COMPLIANT */
/* ZERO DEFECT • MAXIMUM PERFORMANCE    */
/*======================================*/

/* ===================================== */
/* LAYER MANAGEMENT                        */
/* ===================================== */
@layer nvx.tooltip.reset, nvx.tooltip.base, nvx.tooltip.variants, nvx.tooltip.utilities;

/* ===================================== */
/* RESET LAYER - ISOLATED                 */
/* ===================================== */
@layer nvx.tooltip.reset {
  .nvx-tooltip,
  .nvx-tooltip *,
  .nvx-tooltip *::before,
  .nvx-tooltip *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    border: 0 solid transparent;
    font: inherit;
    vertical-align: baseline;
  }
  
  .nvx-tooltip {
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-size-adjust: 100%;
    -webkit-tap-highlight-color: transparent;
  }
}

/* ===================================== */
/* BASE LAYER - CORE TOOLTIP SYSTEM       */
/* ===================================== */
@layer nvx.tooltip.base {
  :root {
    /* RGB Variables for rgba() fallbacks */
    --nvx-primary-rgb: 59, 130, 246;
    --nvx-secondary-rgb: 139, 92, 246;
    --nvx-accent-rgb: 236, 72, 153;
    --nvx-danger-rgb: 239, 68, 68;
    --nvx-success-rgb: 16, 185, 129;
    --nvx-warning-rgb: 245, 158, 11;
    --nvx-gray-50-rgb: 249, 250, 251;
    --nvx-gray-900-rgb: 17, 24, 39;
    
    /* Tooltip-specific tokens with fallbacks */
    --nvx-tooltip-bg: var(--nvx-gray-900, #111827);
    --nvx-tooltip-text: var(--nvx-gray-50, #f9fafb);
    --nvx-tooltip-border: var(--nvx-gray-800, #1f2937);
    --nvx-tooltip-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3), 0 8px 10px -6px rgba(0, 0, 0, 0.2);
    --nvx-tooltip-shadow-dark: 0 10px 25px -5px rgba(0, 0, 0, 0.5), 0 8px 10px -6px rgba(0, 0, 0, 0.3);
    --nvx-tooltip-font-size: var(--nvx-text-sm, 0.875rem);
    --nvx-tooltip-font-weight: var(--nvx-font-medium, 500);
    --nvx-tooltip-padding: var(--nvx-space-2, 0.5rem) var(--nvx-space-3, 0.75rem);
    --nvx-tooltip-border-radius: var(--nvx-radius-md, 0.75rem);
    --nvx-tooltip-max-width: 250px;
    --nvx-tooltip-arrow-size: 8px;
    --nvx-tooltip-offset: 6px;
    
    /* Z-index stack */
    --nvx-tooltip-z-index: calc(var(--nvx-z-tooltip, 1070));
    --nvx-tooltip-z-index-overlay: calc(var(--nvx-z-tooltip, 1070) + 1);
    
    /* Animation durations */
    --nvx-tooltip-duration-in: 150ms;
    --nvx-tooltip-duration-out: 100ms;
    --nvx-tooltip-timing: var(--nvx-ease-standard, cubic-bezier(0.4, 0, 0.2, 1));
  }

  /* Tooltip Container - Base */
  .nvx-tooltip {
    /* Positioning */
    position: absolute;
    z-index: var(--nvx-tooltip-z-index, 1070);
    
    /* Layout */
    display: block;
    max-width: var(--nvx-tooltip-max-width, 250px);
    
    /* Typography */
    font-family: var(--nvx-font-sans, ui-sans-serif, system-ui, -apple-system, sans-serif);
    font-size: var(--nvx-tooltip-font-size, 0.875rem);
    font-weight: var(--nvx-tooltip-font-weight, 500);
    line-height: 1.5;
    letter-spacing: normal;
    word-wrap: break-word;
    white-space: normal;
    
    /* Visual */
    background: var(--nvx-tooltip-bg, #111827);
    color: var(--nvx-tooltip-text, #f9fafb);
    border-radius: var(--nvx-tooltip-border-radius, 0.75rem);
    box-shadow: var(--nvx-tooltip-shadow, 0 10px 25px -5px rgba(0,0,0,0.3));
    border: 1px solid var(--nvx-tooltip-border, #1f2937);
    
    /* Animation */
    opacity: 0;
    visibility: hidden;
    transition: opacity var(--nvx-tooltip-duration-out, 100ms) var(--nvx-tooltip-timing, cubic-bezier(0.4, 0, 0.2, 1)),
                visibility var(--nvx-tooltip-duration-out, 100ms) var(--nvx-tooltip-timing, cubic-bezier(0.4, 0, 0.2, 1)),
                transform var(--nvx-tooltip-duration-out, 100ms) var(--nvx-tooltip-timing, cubic-bezier(0.4, 0, 0.2, 1));
    
    /* Performance */
    will-change: transform, opacity;
    contain: content;
    pointer-events: none;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    
    /* Text rendering */
    text-rendering: optimizeLegibility;
    
    /* Safe areas */
    margin: 0;
    padding: 0;
  }

  /* Tooltip Visible State */
  .nvx-tooltip[data-show="true"],
  .nvx-tooltip.active,
  .nvx-tooltip.show {
    opacity: 1;
    visibility: visible;
    transition: opacity var(--nvx-tooltip-duration-in, 150ms) var(--nvx-tooltip-timing, cubic-bezier(0.4, 0, 0.2, 1)),
                visibility var(--nvx-tooltip-duration-in, 150ms) var(--nvx-tooltip-timing, cubic-bezier(0.4, 0, 0.2, 1)),
                transform var(--nvx-tooltip-duration-in, 150ms) var(--nvx-tooltip-timing, cubic-bezier(0.4, 0, 0.2, 1));
  }

  /* Tooltip Content */
  .nvx-tooltip-content {
    display: block;
    padding: var(--nvx-tooltip-padding, 0.5rem 0.75rem);
    position: relative;
    z-index: 1;
    border-radius: inherit;
  }

  /* ===================================== */
  /* TOOLTIP ARROW SYSTEM - ENTERPRISE     */
  /* ===================================== */
  .nvx-tooltip-arrow {
    position: absolute;
    width: var(--nvx-tooltip-arrow-size, 8px);
    height: var(--nvx-tooltip-arrow-size, 8px);
    background: inherit;
    border: inherit;
    pointer-events: none;
    z-index: -1;
  }

  /* Arrow positioning - using clip-path for perfect edges */
  .nvx-tooltip-arrow::before {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    background: inherit;
    border: inherit;
    clip-path: polygon(0% 0%, 100% 100%, 0% 100%);
    transform: rotate(45deg);
    top: 0;
    left: 0;
  }

  /* ===================================== */
  /* POSITION VARIANTS - 12 DIRECTIONS     */
  /* ===================================== */

  /* TOP */
  .nvx-tooltip[data-position="top"] {
    transform: translateY(calc(var(--nvx-tooltip-offset, 6px) * -1));
  }
  .nvx-tooltip[data-position="top"][data-show="true"],
  .nvx-tooltip[data-position="top"].active,
  .nvx-tooltip[data-position="top"].show {
    transform: translateY(0);
  }
  .nvx-tooltip[data-position="top"] .nvx-tooltip-arrow {
    bottom: calc(var(--nvx-tooltip-arrow-size, 8px) * -0.5);
    left: 50%;
    transform: translateX(-50%) rotate(45deg);
    border-top: none;
    border-left: none;
  }

  /* TOP-START (LEFT) */
  .nvx-tooltip[data-position="top-start"] {
    transform: translateY(calc(var(--nvx-tooltip-offset, 6px) * -1));
  }
  .nvx-tooltip[data-position="top-start"][data-show="true"],
  .nvx-tooltip[data-position="top-start"].active,
  .nvx-tooltip[data-position="top-start"].show {
    transform: translateY(0);
  }
  .nvx-tooltip[data-position="top-start"] .nvx-tooltip-arrow {
    bottom: calc(var(--nvx-tooltip-arrow-size, 8px) * -0.5);
    left: 16px;
    transform: translateX(0) rotate(45deg);
    border-top: none;
    border-left: none;
  }

  /* TOP-END (RIGHT) */
  .nvx-tooltip[data-position="top-end"] {
    transform: translateY(calc(var(--nvx-tooltip-offset, 6px) * -1));
  }
  .nvx-tooltip[data-position="top-end"][data-show="true"],
  .nvx-tooltip[data-position="top-end"].active,
  .nvx-tooltip[data-position="top-end"].show {
    transform: translateY(0);
  }
  .nvx-tooltip[data-position="top-end"] .nvx-tooltip-arrow {
    bottom: calc(var(--nvx-tooltip-arrow-size, 8px) * -0.5);
    right: 16px;
    left: auto;
    transform: translateX(0) rotate(45deg);
    border-top: none;
    border-left: none;
  }

  /* BOTTOM */
  .nvx-tooltip[data-position="bottom"] {
    transform: translateY(var(--nvx-tooltip-offset, 6px));
  }
  .nvx-tooltip[data-position="bottom"][data-show="true"],
  .nvx-tooltip[data-position="bottom"].active,
  .nvx-tooltip[data-position="bottom"].show {
    transform: translateY(0);
  }
  .nvx-tooltip[data-position="bottom"] .nvx-tooltip-arrow {
    top: calc(var(--nvx-tooltip-arrow-size, 8px) * -0.5);
    left: 50%;
    transform: translateX(-50%) rotate(45deg);
    border-bottom: none;
    border-right: none;
  }

  /* BOTTOM-START (LEFT) */
  .nvx-tooltip[data-position="bottom-start"] {
    transform: translateY(var(--nvx-tooltip-offset, 6px));
  }
  .nvx-tooltip[data-position="bottom-start"][data-show="true"],
  .nvx-tooltip[data-position="bottom-start"].active,
  .nvx-tooltip[data-position="bottom-start"].show {
    transform: translateY(0);
  }
  .nvx-tooltip[data-position="bottom-start"] .nvx-tooltip-arrow {
    top: calc(var(--nvx-tooltip-arrow-size, 8px) * -0.5);
    left: 16px;
    transform: translateX(0) rotate(45deg);
    border-bottom: none;
    border-right: none;
  }

  /* BOTTOM-END (RIGHT) */
  .nvx-tooltip[data-position="bottom-end"] {
    transform: translateY(var(--nvx-tooltip-offset, 6px));
  }
  .nvx-tooltip[data-position="bottom-end"][data-show="true"],
  .nvx-tooltip[data-position="bottom-end"].active,
  .nvx-tooltip[data-position="bottom-end"].show {
    transform: translateY(0);
  }
  .nvx-tooltip[data-position="bottom-end"] .nvx-tooltip-arrow {
    top: calc(var(--nvx-tooltip-arrow-size, 8px) * -0.5);
    right: 16px;
    left: auto;
    transform: translateX(0) rotate(45deg);
    border-bottom: none;
    border-right: none;
  }

  /* LEFT */
  .nvx-tooltip[data-position="left"] {
    transform: translateX(calc(var(--nvx-tooltip-offset, 6px) * -1));
  }
  .nvx-tooltip[data-position="left"][data-show="true"],
  .nvx-tooltip[data-position="left"].active,
  .nvx-tooltip[data-position="left"].show {
    transform: translateX(0);
  }
  .nvx-tooltip[data-position="left"] .nvx-tooltip-arrow {
    right: calc(var(--nvx-tooltip-arrow-size, 8px) * -0.5);
    top: 50%;
    transform: translateY(-50%) rotate(45deg);
    border-left: none;
    border-bottom: none;
  }

  /* LEFT-START (TOP) */
  .nvx-tooltip[data-position="left-start"] {
    transform: translateX(calc(var(--nvx-tooltip-offset, 6px) * -1));
  }
  .nvx-tooltip[data-position="left-start"][data-show="true"],
  .nvx-tooltip[data-position="left-start"].active,
  .nvx-tooltip[data-position="left-start"].show {
    transform: translateX(0);
  }
  .nvx-tooltip[data-position="left-start"] .nvx-tooltip-arrow {
    right: calc(var(--nvx-tooltip-arrow-size, 8px) * -0.5);
    top: 16px;
    bottom: auto;
    transform: translateY(0) rotate(45deg);
    border-left: none;
    border-bottom: none;
  }

  /* LEFT-END (BOTTOM) */
  .nvx-tooltip[data-position="left-end"] {
    transform: translateX(calc(var(--nvx-tooltip-offset, 6px) * -1));
  }
  .nvx-tooltip[data-position="left-end"][data-show="true"],
  .nvx-tooltip[data-position="left-end"].active,
  .nvx-tooltip[data-position="left-end"].show {
    transform: translateX(0);
  }
  .nvx-tooltip[data-position="left-end"] .nvx-tooltip-arrow {
    right: calc(var(--nvx-tooltip-arrow-size, 8px) * -0.5);
    bottom: 16px;
    top: auto;
    transform: translateY(0) rotate(45deg);
    border-left: none;
    border-bottom: none;
  }

  /* RIGHT */
  .nvx-tooltip[data-position="right"] {
    transform: translateX(var(--nvx-tooltip-offset, 6px));
  }
  .nvx-tooltip[data-position="right"][data-show="true"],
  .nvx-tooltip[data-position="right"].active,
  .nvx-tooltip[data-position="right"].show {
    transform: translateX(0);
  }
  .nvx-tooltip[data-position="right"] .nvx-tooltip-arrow {
    left: calc(var(--nvx-tooltip-arrow-size, 8px) * -0.5);
    top: 50%;
    transform: translateY(-50%) rotate(45deg);
    border-right: none;
    border-top: none;
  }

  /* RIGHT-START (TOP) */
  .nvx-tooltip[data-position="right-start"] {
    transform: translateX(var(--nvx-tooltip-offset, 6px));
  }
  .nvx-tooltip[data-position="right-start"][data-show="true"],
  .nvx-tooltip[data-position="right-start"].active,
  .nvx-tooltip[data-position="right-start"].show {
    transform: translateX(0);
  }
  .nvx-tooltip[data-position="right-start"] .nvx-tooltip-arrow {
    left: calc(var(--nvx-tooltip-arrow-size, 8px) * -0.5);
    top: 16px;
    bottom: auto;
    transform: translateY(0) rotate(45deg);
    border-right: none;
    border-top: none;
  }

  /* RIGHT-END (BOTTOM) */
  .nvx-tooltip[data-position="right-end"] {
    transform: translateX(var(--nvx-tooltip-offset, 6px));
  }
  .nvx-tooltip[data-position="right-end"][data-show="true"],
  .nvx-tooltip[data-position="right-end"].active,
  .nvx-tooltip[data-position="right-end"].show {
    transform: translateX(0);
  }
  .nvx-tooltip[data-position="right-end"] .nvx-tooltip-arrow {
    left: calc(var(--nvx-tooltip-arrow-size, 8px) * -0.5);
    bottom: 16px;
    top: auto;
    transform: translateY(0) rotate(45deg);
    border-right: none;
    border-top: none;
  }

  /* ===================================== */
  /* DARK THEME - AUTOMATIC DETECTION      */
  /* ===================================== */
  [data-theme="dark"] .nvx-tooltip {
    background: var(--nvx-tooltip-bg-dark, #1e293b);
    border-color: var(--nvx-tooltip-border-dark, #334155);
    color: var(--nvx-tooltip-text-dark, #f8fafc);
    box-shadow: var(--nvx-tooltip-shadow-dark, 0 10px 25px -5px rgba(0,0,0,0.5));
  }

  /* System Dark Theme Detection (no JS) */
  @media (prefers-color-scheme: dark) {
    .nvx-tooltip:not([data-theme]) {
      background: var(--nvx-tooltip-bg-dark, #1e293b);
      border-color: var(--nvx-tooltip-border-dark, #334155);
      color: var(--nvx-tooltip-text-dark, #f8fafc);
      box-shadow: var(--nvx-tooltip-shadow-dark, 0 10px 25px -5px rgba(0,0,0,0.5));
    }
  }
}

/* ===================================== */
/* VARIANT LAYER - STYLE VARIANTS         */
/* ===================================== */
@layer nvx.tooltip.variants {
  /* Light Variant */
  .nvx-tooltip-light {
    --nvx-tooltip-bg: var(--nvx-gray-50, #f9fafb);
    --nvx-tooltip-text: var(--nvx-gray-900, #111827);
    --nvx-tooltip-border: var(--nvx-gray-200, #e5e7eb);
    --nvx-tooltip-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
  }
  
  [data-theme="dark"] .nvx-tooltip-light {
    --nvx-tooltip-bg: var(--nvx-gray-800, #1f2937);
    --nvx-tooltip-text: var(--nvx-gray-100, #f3f4f6);
    --nvx-tooltip-border: var(--nvx-gray-700, #374151);
  }

  /* Primary Variant */
  .nvx-tooltip-primary {
    --nvx-tooltip-bg: var(--nvx-primary-600, #2563eb);
    --nvx-tooltip-text: #ffffff;
    --nvx-tooltip-border: var(--nvx-primary-700, #1d4ed8);
  }

  /* Secondary Variant */
  .nvx-tooltip-secondary {
    --nvx-tooltip-bg: var(--nvx-secondary-600, #7c3aed);
    --nvx-tooltip-text: #ffffff;
    --nvx-tooltip-border: var(--nvx-secondary-700, #6d28d9);
  }

  /* Success Variant */
  .nvx-tooltip-success {
    --nvx-tooltip-bg: var(--nvx-success-600, #059669);
    --nvx-tooltip-text: #ffffff;
    --nvx-tooltip-border: var(--nvx-success-700, #047857);
  }

  /* Danger Variant */
  .nvx-tooltip-danger {
    --nvx-tooltip-bg: var(--nvx-danger-600, #dc2626);
    --nvx-tooltip-text: #ffffff;
    --nvx-tooltip-border: var(--nvx-danger-700, #b91c1c);
  }

  /* Warning Variant */
  .nvx-tooltip-warning {
    --nvx-tooltip-bg: var(--nvx-warning-600, #d97706);
    --nvx-tooltip-text: #ffffff;
    --nvx-tooltip-border: var(--nvx-warning-700, #b45309);
  }

  /* Info Variant */
  .nvx-tooltip-info {
    --nvx-tooltip-bg: var(--nvx-info-600, #0891b2);
    --nvx-tooltip-text: #ffffff;
    --nvx-tooltip-border: var(--nvx-info-700, #0e7490);
  }

  /* Glass Variant */
  .nvx-tooltip-glass {
    --nvx-tooltip-bg: rgba(255, 255, 255, 0.9);
    --nvx-tooltip-text: var(--nvx-gray-900, #111827);
    --nvx-tooltip-border: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
  }
  
  [data-theme="dark"] .nvx-tooltip-glass {
    --nvx-tooltip-bg: rgba(30, 41, 59, 0.9);
    --nvx-tooltip-text: var(--nvx-gray-50, #f9fafb);
    --nvx-tooltip-border: rgba(255, 255, 255, 0.1);
  }

  /* No Arrow Variant */
  .nvx-tooltip-no-arrow .nvx-tooltip-arrow {
    display: none;
  }

  /* Size Variants */
  .nvx-tooltip-sm {
    --nvx-tooltip-font-size: var(--nvx-text-xs, 0.75rem);
    --nvx-tooltip-padding: var(--nvx-space-1, 0.25rem) var(--nvx-space-2, 0.5rem);
    --nvx-tooltip-arrow-size: 6px;
  }

  .nvx-tooltip-lg {
    --nvx-tooltip-font-size: var(--nvx-text-base, 1rem);
    --nvx-tooltip-padding: var(--nvx-space-3, 0.75rem) var(--nvx-space-4, 1rem);
    --nvx-tooltip-arrow-size: 10px;
  }

  .nvx-tooltip-xl {
    --nvx-tooltip-font-size: var(--nvx-text-lg, 1.125rem);
    --nvx-tooltip-padding: var(--nvx-space-4, 1rem) var(--nvx-space-5, 1.25rem);
    --nvx-tooltip-arrow-size: 12px;
    --nvx-tooltip-max-width: 350px;
  }
}

/* ===================================== */
/* UTILITIES - RESPONSIVE & ACCESSIBILITY */
/* ===================================== */
@layer nvx.tooltip.utilities {
  /* Interactive Elements with Tooltips */
  [data-tooltip] {
    position: relative;
    cursor: help;
  }

  [data-tooltip]:focus-visible {
    outline: 3px solid var(--nvx-color-focus-ring, #3b82f6);
    outline-offset: 2px;
  }

  /* Responsive Breakpoints */
  @media (max-width: 768px) {
    .nvx-tooltip {
      --nvx-tooltip-max-width: 200px;
      --nvx-tooltip-offset: 4px;
    }
    
    .nvx-tooltip-lg,
    .nvx-tooltip-xl {
      --nvx-tooltip-max-width: 250px;
    }
  }

  @media (max-width: 480px) {
    .nvx-tooltip {
      --nvx-tooltip-max-width: 180px;
      --nvx-tooltip-font-size: var(--nvx-text-xs, 0.75rem);
    }
  }

  /* Touch Device Optimizations */
  @media (hover: none) and (pointer: coarse) {
    [data-tooltip] {
      -webkit-tap-highlight-color: transparent;
    }
    
    .nvx-tooltip {
      --nvx-tooltip-offset: 8px;
      pointer-events: none;
    }
  }

  /* Reduced Motion */
  @media (prefers-reduced-motion: reduce) {
    .nvx-tooltip {
      transition: none !important;
    }
    
    .nvx-tooltip[data-show="true"],
    .nvx-tooltip.active,
    .nvx-tooltip.show {
      transition: none !important;
    }
  }

  /* Reduced Transparency */
  @media (prefers-reduced-transparency: reduce) {
    .nvx-tooltip-glass {
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
      background: var(--nvx-gray-50, #f9fafb) !important;
    }
    
    [data-theme="dark"] .nvx-tooltip-glass,
    @media (prefers-color-scheme: dark) {
      .nvx-tooltip-glass {
        background: var(--nvx-gray-800, #1f2937) !important;
      }
    }
  }

  /* High Contrast Mode */
  @media (prefers-contrast: high) {
    .nvx-tooltip {
      border: 2px solid CanvasText;
      background: Canvas !important;
      color: CanvasText !important;
      box-shadow: none !important;
    }
    
    .nvx-tooltip-arrow {
      border: 2px solid CanvasText;
      background: Canvas !important;
    }
    
    [data-theme="dark"] .nvx-tooltip {
      border-color: CanvasText;
    }
  }

  /* Windows High Contrast Mode */
  @media (forced-colors: active) {
    .nvx-tooltip {
      border: 2px solid ButtonText;
      background: Canvas !important;
      color: CanvasText !important;
      forced-color-adjust: none;
    }
    
    .nvx-tooltip-arrow {
      border: 2px solid ButtonText;
      background: Canvas !important;
    }
  }

  /* RTL Language Support */
  [dir="rtl"] .nvx-tooltip[data-position="top-start"] .nvx-tooltip-arrow,
  [dir="rtl"] .nvx-tooltip[data-position="bottom-start"] .nvx-tooltip-arrow,
  [dir="rtl"] .nvx-tooltip[data-position="left-start"] .nvx-tooltip-arrow,
  [dir="rtl"] .nvx-tooltip[data-position="right-start"] .nvx-tooltip-arrow {
    left: auto;
    right: 16px;
  }
  
  [dir="rtl"] .nvx-tooltip[data-position="top-end"] .nvx-tooltip-arrow,
  [dir="rtl"] .nvx-tooltip[data-position="bottom-end"] .nvx-tooltip-arrow,
  [dir="rtl"] .nvx-tooltip[data-position="left-end"] .nvx-tooltip-arrow,
  [dir="rtl"] .nvx-tooltip[data-position="right-end"] .nvx-tooltip-arrow {
    right: auto;
    left: 16px;
  }

  /* Animation Variants */
  .nvx-tooltip-fade {
    transition: opacity var(--nvx-tooltip-duration-in, 150ms) var(--nvx-tooltip-timing, cubic-bezier(0.4, 0, 0.2, 1)),
                visibility var(--nvx-tooltip-duration-in, 150ms) var(--nvx-tooltip-timing, cubic-bezier(0.4, 0, 0.2, 1));
  }
  
  .nvx-tooltip-fade[data-show="true"],
  .nvx-tooltip-fade.active,
  .nvx-tooltip-fade.show {
    transform: none !important;
  }

  .nvx-tooltip-scale {
    transform: scale(0.9);
  }
  .nvx-tooltip-scale[data-show="true"],
  .nvx-tooltip-scale.active,
  .nvx-tooltip-scale.show {
    transform: scale(1);
  }

  /* Print Styles */
  @media print {
    .nvx-tooltip,
    [data-tooltip]::before,
    [data-tooltip]::after {
      display: none !important;
    }
  }
}

/* ===================================== */
/* FALLBACK FOR OLDER BROWSERS            */
/* ===================================== */
@supports not (clip-path: polygon(0% 0%, 100% 100%, 0% 100%)) {
  .nvx-tooltip-arrow::before {
    clip-path: none;
    transform: rotate(45deg);
    width: 70%;
    height: 70%;
    top: 15%;
    left: 15%;
  }
}

@supports not (backdrop-filter: blur(20px)) {
  .nvx-tooltip-glass {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background: rgba(255, 255, 255, 0.98);
  }
  
  [data-theme="dark"] .nvx-tooltip-glass {
    background: rgba(30, 41, 59, 0.98);
  }
}

/* ===================================== */
/* WEB COMPONENT / SHADOW DOM SUPPORT     */
/* ===================================== */
:host {
  display: block;
  contain: content;
}

:host(.nvx-tooltip) {
  all: revert;
  position: absolute;
  z-index: var(--nvx-tooltip-z-index, 1070);
  max-width: var(--nvx-tooltip-max-width, 250px);
  font-family: var(--nvx-font-sans, ui-sans-serif, system-ui, -apple-system, sans-serif);
  font-size: var(--nvx-tooltip-font-size, 0.875rem);
  background: var(--nvx-tooltip-bg, #111827);
  color: var(--nvx-tooltip-text, #f9fafb);
  border-radius: var(--nvx-tooltip-border-radius, 0.75rem);
  box-shadow: var(--nvx-tooltip-shadow, 0 10px 25px -5px rgba(0,0,0,0.3));
  border: 1px solid var(--nvx-tooltip-border, #1f2937);
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}

:host(.nvx-tooltip.active),
:host(.nvx-tooltip.show) {
  opacity: 1;
  visibility: visible;
}

/* ===================================== */
/* PERFORMANCE OPTIMIZATIONS              */
/* ===================================== */
.nvx-tooltip {
  /* Hardware acceleration for smooth animations */
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
  
  /* Containment for performance */
  contain: layout paint style;
  
  /* Optimize for compositor */
  will-change: transform, opacity;
}

/* Lazy initialization - reduce paint area */
.nvx-tooltip:not([data-show="true"]):not(.active):not(.show) {
  display: none;
}

/* ===================================== */
/* NEVOX TOOLTIP SYSTEM v4.1              */
/* ENTERPRISE-GRADE • PRODUCTION-READY    */
/* WCAG 2.1 AAA • SECTION 508 COMPLIANT   */
/* ZERO DEFECT • MAXIMUM PERFORMANCE      */
/* ===================================== */
