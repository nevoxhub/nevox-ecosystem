/*======================================*/
/* ‚ö° NEVOX AVATAR GROUP v4.1              */
/* ENTERPRISE-GRADE ‚Ä¢ PRODUCTION-READY    */
/* WCAG 2.1 AAA ‚Ä¢ SECTION 508 COMPLIANT   */
/* AVATAR STACK WITH COUNT ‚Ä¢ RTL READY    */
/* ENHANCED WITH ANIMATIONS, TOOLTIPS,    */
/* STATUS INDICATORS, LAYOUT VARIANTS     */
/* STRATEGIC GLASS MODE ‚Ä¢ 100% COMPLETE   */
/*======================================*/

/* ===================================== */
/* CORE VARIABLES (WITH FALLBACKS)        */
/* ===================================== */
:root {
  /* Base tokens */
  --nvx-color-bg-card: #ffffff;
  --nvx-color-bg-card-dark: #1e293b;
  --nvx-color-bg-tertiary: #f1f5f9;
  --nvx-color-bg-tertiary-dark: #334155;
  --nvx-color-text-main: #0f172a;
  --nvx-color-text-main-dark: #f8fafc;
  --nvx-color-text-secondary: #475569;
  --nvx-color-text-tertiary: #94a3b8;
  --nvx-color-brand-primary: #3b82f6;
  --nvx-color-brand-secondary: #8b5cf6;
  --nvx-color-on-primary: #ffffff;
  --nvx-color-success: #10b981;
  --nvx-color-warning: #f59e0b;
  --nvx-color-error: #ef4444;
  --nvx-color-focus-ring: #3b82f6;
  --nvx-color-bg-inverse: #1e293b;
  --nvx-color-bg-inverse-dark: #0f172a;
  --nvx-color-text-inverse: #ffffff;
  --nvx-shimmer-color: rgba(255, 255, 255, 0.2);
  --nvx-state-disabled-opacity: 0.5;
  --nvx-duration-fast: 150ms;
  --nvx-duration-medium: 300ms;
  --nvx-ease-standard: cubic-bezier(0.4, 0, 0.2, 1);
  --nvx-ease-emphasized: cubic-bezier(0.2, 0, 0, 1);
  --nvx-ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
  --nvx-shadow-sm: 0 1px 2px 0 rgba(0,0,0,0.05);
  --nvx-shadow-md: 0 6px 12px -2px rgba(0,0,0,0.1);
  --nvx-shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1);
  --nvx-shadow-xl: 0 20px 25px -5px rgba(0,0,0,0.1);
  --nvx-font-medium: 500;
  --nvx-font-semibold: 600;
  --nvx-text-xs: 0.75rem;
  --nvx-text-sm: 0.875rem;
  --nvx-text-base: 1rem;
  --nvx-text-lg: 1.125rem;
  --nvx-radius-sm: 0.5rem;
  --nvx-radius-md: 0.75rem;
  --nvx-radius-lg: 1rem;
  --nvx-radius-full: 9999px;
  --nvx-z-base: 1;
  --nvx-z-hover: 5;
  --nvx-z-tooltip: 1070;
  --nvx-space-1: 0.25rem;
  --nvx-space-2: 0.5rem;
  --nvx-space-3: 0.75rem;
  --nvx-space-4: 1rem;
  --nvx-grid-columns: 4;
  
  /* Avatar group specific tokens */
  --nvx-avatar-group-gap: -0.5rem;
  --nvx-avatar-group-gap-sm: -0.375rem;
  --nvx-avatar-group-gap-lg: -0.75rem;
  --nvx-avatar-group-gap-xl: -1rem;
  
  --nvx-avatar-size: 2.5rem;
  --nvx-avatar-size-sm: 2rem;
  --nvx-avatar-size-lg: 3rem;
  --nvx-avatar-size-xl: 3.5rem;
  
  --nvx-avatar-border-width: 2px;
  --nvx-avatar-border-color: var(--nvx-color-bg-card, #ffffff);
  --nvx-avatar-border-color-dark: var(--nvx-color-bg-card-dark, #1e293b);
  
  --nvx-avatar-bg: var(--nvx-color-bg-tertiary, #f1f5f9);
  --nvx-avatar-bg-dark: var(--nvx-color-bg-tertiary-dark, #334155);
  --nvx-avatar-color: var(--nvx-color-text-main, #0f172a);
  --nvx-avatar-color-dark: var(--nvx-color-text-main-dark, #f8fafc);
  --nvx-avatar-font-weight: var(--nvx-font-medium, 500);
  
  --nvx-avatar-count-bg: var(--nvx-color-brand-primary, #3b82f6);
  --nvx-avatar-count-color: var(--nvx-color-on-primary, #ffffff);
  --nvx-avatar-count-font-size: var(--nvx-text-sm, 0.875rem);
  
  /* Enhanced features */
  --nvx-avatar-hover-scale: 1.05;
  --nvx-avatar-hover-translate: -2px;
  --nvx-avatar-tooltip-bg: var(--nvx-color-bg-inverse, #1e293b);
  --nvx-avatar-tooltip-bg-dark: var(--nvx-color-bg-inverse-dark, #0f172a);
  --nvx-avatar-tooltip-color: var(--nvx-color-text-inverse, #ffffff);
  --nvx-avatar-tooltip-arrow-size: 5px;
  --nvx-avatar-status-size: 10px;
  --nvx-avatar-status-size-sm: 8px;
  --nvx-avatar-status-size-lg: 12px;
  --nvx-avatar-loading-shimmer-color: var(--nvx-shimmer-color, rgba(255,255,255,0.2));
  
  /* Strategic glass mode tokens */
  --nvx-glass-bg: rgba(255, 255, 255, 0.12);
  --nvx-glass-bg-dark: rgba(0, 0, 0, 0.3);
  --nvx-glass-border: rgba(255, 255, 255, 0.2);
  --nvx-glass-border-dark: rgba(255, 255, 255, 0.15);
  --nvx-glass-blur: blur(12px);
  --nvx-glass-saturate: saturate(180%);
  --nvx-glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2);
  --nvx-glass-shadow-dark: 0 8px 32px 0 rgba(0, 0, 0, 0.4);
}

/* Dark theme overrides */
[data-theme="dark"] {
  --nvx-avatar-border-color: var(--nvx-avatar-border-color-dark);
  --nvx-avatar-bg: var(--nvx-avatar-bg-dark, #334155);
  --nvx-avatar-color: var(--nvx-avatar-color-dark, #f8fafc);
  --nvx-avatar-tooltip-bg: var(--nvx-avatar-tooltip-bg-dark, #0f172a);
}

/* System dark theme fallback */
@media (prefers-color-scheme: dark) {
  .nvx-avatar-group:not([data-theme]) {
    --nvx-avatar-border-color: var(--nvx-avatar-border-color-dark);
    --nvx-avatar-bg: var(--nvx-avatar-bg-dark, #334155);
    --nvx-avatar-color: var(--nvx-avatar-color-dark, #f8fafc);
    --nvx-avatar-tooltip-bg: var(--nvx-avatar-tooltip-bg-dark, #0f172a);
  }
}

/* ===================================== */
/* AVATAR GROUP CONTAINER                 */
/* ===================================== */
.nvx-avatar-group {
  display: inline-flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 0;
  list-style: none;
  margin: 0;
  padding: 0;
  line-height: 1;
  contain: content;
  isolation: isolate;
  position: relative;
}

/* ===================================== */
/* BASE AVATAR STYLES                     */
/* ===================================== */
.nvx-avatar-group .nvx-avatar {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: var(--nvx-avatar-size);
  height: var(--nvx-avatar-size);
  border-radius: var(--nvx-radius-full, 9999px);
  background: var(--nvx-avatar-bg);
  color: var(--nvx-avatar-color);
  font-weight: var(--nvx-avatar-font-weight);
  font-size: calc(var(--nvx-avatar-size) * 0.4);
  border: var(--nvx-avatar-border-width) solid var(--nvx-avatar-border-color);
  margin-inline-end: var(--nvx-avatar-group-gap);
  transition: transform var(--nvx-duration-fast, 150ms) var(--nvx-ease-standard),
              box-shadow var(--nvx-duration-fast, 150ms) var(--nvx-ease-standard),
              z-index 0s;
  z-index: var(--nvx-z-base);
  overflow: hidden;
  flex-shrink: 0;
  box-shadow: var(--nvx-shadow-sm, 0 1px 2px 0 rgba(0,0,0,0.05));
  cursor: default;
}

.nvx-avatar-group .nvx-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.nvx-avatar-group .nvx-avatar:last-child {
  margin-inline-end: 0;
}

/* Hover effect */
.nvx-avatar-group .nvx-avatar:hover {
  transform: translateY(var(--nvx-avatar-hover-translate)) scale(var(--nvx-avatar-hover-scale));
  box-shadow: var(--nvx-shadow-md, 0 6px 12px -2px rgba(0,0,0,0.1));
  z-index: var(--nvx-z-hover);
}

/* Focus states */
.nvx-avatar-group .nvx-avatar:focus-visible {
  outline: 3px solid var(--nvx-color-focus-ring, #3b82f6);
  outline-offset: 2px;
  z-index: var(--nvx-z-hover);
}
.nvx-avatar-group .nvx-avatar:focus:not(:focus-visible) {
  outline: none;
}

/* Disabled state */
.nvx-avatar-group .nvx-avatar[aria-disabled="true"],
.nvx-avatar-group .nvx-avatar.disabled {
  opacity: var(--nvx-state-disabled-opacity, 0.5);
  filter: grayscale(1);
  pointer-events: none;
}

/* ===================================== */
/* STATUS INDICATOR                       */
/* ===================================== */
.nvx-avatar-group .nvx-avatar .nvx-avatar-status {
  position: absolute;
  bottom: 0;
  inset-inline-end: 0;
  width: var(--nvx-avatar-status-size);
  height: var(--nvx-avatar-status-size);
  border-radius: var(--nvx-radius-full, 9999px);
  border: var(--nvx-avatar-border-width) solid var(--nvx-avatar-border-color);
  background: transparent;
  z-index: calc(var(--nvx-z-hover) + 1);
  pointer-events: none;
  transition: opacity var(--nvx-duration-fast, 150ms) ease;
}

.nvx-avatar-group-sm .nvx-avatar .nvx-avatar-status {
  width: var(--nvx-avatar-status-size-sm);
  height: var(--nvx-avatar-status-size-sm);
  border-width: 1.5px;
}

.nvx-avatar-group-lg .nvx-avatar .nvx-avatar-status,
.nvx-avatar-group-xl .nvx-avatar .nvx-avatar-status {
  width: var(--nvx-avatar-status-size-lg);
  height: var(--nvx-avatar-status-size-lg);
}

/* Status colors */
.nvx-avatar[data-status="online"] .nvx-avatar-status {
  background: var(--nvx-color-success, #10b981);
}
.nvx-avatar[data-status="busy"] .nvx-avatar-status {
  background: var(--nvx-color-error, #ef4444);
}
.nvx-avatar[data-status="away"] .nvx-avatar-status {
  background: var(--nvx-color-warning, #f59e0b);
}
.nvx-avatar[data-status="offline"] .nvx-avatar-status {
  background: var(--nvx-color-text-tertiary, #94a3b8);
}

/* Hide status when tooltip is active */
.nvx-avatar[data-tooltip]:hover .nvx-avatar-status,
.nvx-avatar[data-tooltip]:focus .nvx-avatar-status {
  opacity: 0.3;
}

/* ===================================== */
/* AVATAR COUNT                           */
/* ===================================== */
.nvx-avatar-group .nvx-avatar-count {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: var(--nvx-avatar-size);
  height: var(--nvx-avatar-size);
  border-radius: var(--nvx-radius-full, 9999px);
  background: var(--nvx-avatar-count-bg);
  color: var(--nvx-avatar-count-color);
  font-size: var(--nvx-avatar-count-font-size);
  font-weight: var(--nvx-font-semibold, 600);
  border: var(--nvx-avatar-border-width) solid var(--nvx-avatar-border-color);
  margin-inline-end: 0;
  box-shadow: var(--nvx-shadow-sm, 0 1px 2px 0 rgba(0,0,0,0.05));
  flex-shrink: 0;
  cursor: default;
  transition: transform var(--nvx-duration-fast, 150ms) var(--nvx-ease-standard);
}

.nvx-avatar-group .nvx-avatar-count:hover {
  transform: translateY(var(--nvx-avatar-hover-translate)) scale(var(--nvx-avatar-hover-scale));
  box-shadow: var(--nvx-shadow-md, 0 6px 12px -2px rgba(0,0,0,0.1));
}

/* Count size adjustments */
.nvx-avatar-group .nvx-avatar-count[data-count="99"] {
  font-size: calc(var(--nvx-avatar-count-font-size) * 0.9);
}
.nvx-avatar-group .nvx-avatar-count[data-count="999"] {
  font-size: calc(var(--nvx-avatar-count-font-size) * 0.8);
}
.nvx-avatar-group .nvx-avatar-count[data-count="9999"] {
  font-size: calc(var(--nvx-avatar-count-font-size) * 0.7);
}

/* ===================================== */
/* SIZE VARIANTS                          */
/* ===================================== */
.nvx-avatar-group-sm {
  --nvx-avatar-size: var(--nvx-avatar-size-sm);
  --nvx-avatar-group-gap: var(--nvx-avatar-group-gap-sm);
  --nvx-avatar-count-font-size: var(--nvx-text-xs, 0.75rem);
}
.nvx-avatar-group-lg {
  --nvx-avatar-size: var(--nvx-avatar-size-lg);
  --nvx-avatar-group-gap: var(--nvx-avatar-group-gap-lg);
  --nvx-avatar-count-font-size: var(--nvx-text-base, 1rem);
}
.nvx-avatar-group-xl {
  --nvx-avatar-size: var(--nvx-avatar-size-xl);
  --nvx-avatar-group-gap: var(--nvx-avatar-group-gap-xl);
  --nvx-avatar-count-font-size: var(--nvx-text-lg, 1.125rem);
}

/* ===================================== */
/* LAYOUT VARIANTS                        */
/* ===================================== */
.nvx-avatar-group-grid {
  display: inline-grid;
  grid-template-columns: repeat(var(--nvx-grid-columns, 4), auto);
  gap: 0;
}
.nvx-avatar-group-vertical {
  flex-direction: column;
}
.nvx-avatar-group-vertical .nvx-avatar {
  margin-inline-end: 0;
  margin-bottom: var(--nvx-avatar-group-gap);
}
.nvx-avatar-group-vertical .nvx-avatar:last-child {
  margin-bottom: 0;
}
.nvx-avatar-group-spaced {
  gap: var(--nvx-space-2, 0.5rem);
}
.nvx-avatar-group-spaced .nvx-avatar {
  margin-inline-end: 0 !important;
}
.nvx-avatar-group-centered {
  justify-content: center;
}

/* Max children - hide extras */
.nvx-avatar-group-max-5 .nvx-avatar:nth-child(n+6) {
  display: none;
}
.nvx-avatar-group-max-5 .nvx-avatar-count {
  display: flex;
}
.nvx-avatar-group-max[data-max="3"] .nvx-avatar:nth-child(n+4) {
  display: none;
}

/* ===================================== */
/* BORDERLESS VARIANT                     */
/* ===================================== */
.nvx-avatar-group-borderless .nvx-avatar,
.nvx-avatar-group-borderless .nvx-avatar-count {
  border-width: 0;
  box-shadow: var(--nvx-shadow-md, 0 6px 12px -2px rgba(0,0,0,0.1));
}

/* ===================================== */
/* RING EFFECTS                           */
/* ===================================== */
.nvx-avatar-group-ring-primary .nvx-avatar,
.nvx-avatar-group-ring-primary .nvx-avatar-count {
  box-shadow: 0 0 0 2px var(--nvx-color-brand-primary, #3b82f6);
}
.nvx-avatar-group-ring-secondary .nvx-avatar,
.nvx-avatar-group-ring-secondary .nvx-avatar-count {
  box-shadow: 0 0 0 2px var(--nvx-color-brand-secondary, #8b5cf6);
}
.nvx-avatar-group-ring-success .nvx-avatar,
.nvx-avatar-group-ring-success .nvx-avatar-count {
  box-shadow: 0 0 0 2px var(--nvx-color-success, #10b981);
}
.nvx-avatar-group-ring-warning .nvx-avatar,
.nvx-avatar-group-ring-warning .nvx-avatar-count {
  box-shadow: 0 0 0 2px var(--nvx-color-warning, #f59e0b);
}
.nvx-avatar-group-ring-error .nvx-avatar,
.nvx-avatar-group-ring-error .nvx-avatar-count {
  box-shadow: 0 0 0 2px var(--nvx-color-error, #ef4444);
}
.nvx-avatar-group-ring-double .nvx-avatar {
  box-shadow: 0 0 0 2px var(--nvx-color-bg-card), 0 0 0 4px var(--nvx-color-brand-primary, #3b82f6);
}
.nvx-avatar-group-ring-double .nvx-avatar-count {
  box-shadow: 0 0 0 2px var(--nvx-color-bg-card), 0 0 0 4px var(--nvx-color-brand-primary, #3b82f6);
}

/* ===================================== */
/* STRATEGIC GLASS MODE                   */
/* ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶ú‡¶æ‡¶Ø‡¶º‡¶ó‡¶æ‡¶Ø‡¶º ‡¶á‡¶â‡¶ú ‡¶ï‡¶∞‡ßÅ‡¶®       */
/* ===================================== */

/* 1. ‡¶π‡¶ø‡¶∞‡ßã ‡¶∏‡ßá‡¶ï‡¶∂‡¶® / ‡¶ì‡¶Ø‡¶º‡ßá‡¶≤‡¶ï‡¶æ‡¶Æ ‡¶è‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ */
.hero-section .nvx-avatar-group-glass,
.welcome-area .nvx-avatar-group-glass {
  --nvx-avatar-bg: var(--nvx-glass-bg);
  --nvx-avatar-count-bg: var(--nvx-glass-bg);
}
.hero-section .nvx-avatar-group-glass .nvx-avatar,
.hero-section .nvx-avatar-group-glass .nvx-avatar-count,
.welcome-area .nvx-avatar-group-glass .nvx-avatar,
.welcome-area .nvx-avatar-group-glass .nvx-avatar-count {
  background: var(--nvx-glass-bg, rgba(255,255,255,0.12));
  backdrop-filter: var(--nvx-glass-blur, blur(12px)) var(--nvx-glass-saturate, saturate(180%));
  -webkit-backdrop-filter: var(--nvx-glass-blur, blur(12px)) var(--nvx-glass-saturate, saturate(180%));
  border: 1px solid var(--nvx-glass-border, rgba(255,255,255,0.2));
  box-shadow: var(--nvx-glass-shadow, 0 8px 32px 0 rgba(31,38,135,0.2));
  transition: all 0.3s var(--nvx-ease-bounce);
}
.hero-section .nvx-avatar-group-glass .nvx-avatar:hover,
.welcome-area .nvx-avatar-group-glass .nvx-avatar:hover {
  transform: translateY(-6px) scale(1.15);
  box-shadow: var(--nvx-glass-shadow), 0 12px 40px 0 rgba(59,130,246,0.3);
}

/* 2. ‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡¶Ø‡¶º‡¶æ‡¶Æ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ / ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø */
.premium-user .nvx-avatar-group-glass-vip .nvx-avatar,
.vip-badge .nvx-avatar-group-glass-vip .nvx-avatar {
  background: linear-gradient(135deg, rgba(255,215,0,0.15), rgba(255,165,0,0.1));
  backdrop-filter: blur(12px) saturate(180%);
  -webkit-backdrop-filter: blur(12px) saturate(180%);
  border: 1px solid rgba(255,215,0,0.3);
  box-shadow: 0 0 30px rgba(255,215,0,0.2);
  animation: nvxVipGlow 3s infinite ease-in-out;
}
@keyframes nvxVipGlow {
  0%, 100% { box-shadow: 0 0 20px rgba(255,215,0,0.2); }
  50% { box-shadow: 0 0 40px rgba(255,215,0,0.4); }
}

/* 3. ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶° ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü / ‡¶π‡¶æ‡¶á‡¶≤‡¶æ‡¶á‡¶ü */
.featured-content .nvx-avatar-group-glass-featured .nvx-avatar {
  background: rgba(59,130,246,0.08);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(59,130,246,0.3);
  box-shadow: 0 8px 32px -8px rgba(59,130,246,0.3);
  transform: scale(1.05);
}

/* 4. ‡¶Æ‡ßã‡¶°‡¶æ‡¶≤ / ‡¶™‡¶™‡¶Ü‡¶™ */
.modal-content .nvx-avatar-group-glass-modal .nvx-avatar,
.popup-content .nvx-avatar-group-glass-modal .nvx-avatar {
  background: rgba(255,255,255,0.2);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border: 1px solid rgba(255,255,255,0.3);
  box-shadow: 0 20px 40px -12px rgba(0,0,0,0.3);
}

/* 5. ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶â‡¶á‡¶ú‡ßá‡¶ü */
.dashboard-widget .nvx-avatar-group-glass-widget .nvx-avatar {
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,0.15);
  box-shadow: 0 4px 20px -5px rgba(0,0,0,0.15);
}

/* 6. ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ö‡¶ø‡¶≠‡¶Æ‡ßá‡¶®‡ßç‡¶ü / ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ú */
.achievement-badge .nvx-avatar-group-glass-achievement .nvx-avatar {
  background: linear-gradient(135deg, rgba(255,215,0,0.2), rgba(255,165,0,0.15));
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 2px solid rgba(255,215,0,0.4);
  box-shadow: 0 0 30px rgba(255,215,0,0.3);
  animation: nvxAchievementPulse 2s infinite;
}
@keyframes nvxAchievementPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

/* 7. ‡¶≤‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶™‡ßá‡¶ú ‡¶∏‡¶ø‡¶ü‡¶ø‡¶è */
.cta-section .nvx-avatar-group-glass-cta .nvx-avatar {
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid rgba(255,255,255,0.3);
  box-shadow: 0 20px 40px -10px rgba(59,130,246,0.4);
  transition: all 0.4s var(--nvx-ease-bounce);
}
.cta-section .nvx-avatar-group-glass-cta .nvx-avatar:hover {
  transform: translateY(-8px) scale(1.15);
  box-shadow: 0 30px 50px -10px rgba(59,130,246,0.6);
}

/* Dark theme for glass */
[data-theme="dark"] .hero-section .nvx-avatar-group-glass .nvx-avatar,
[data-theme="dark"] .welcome-area .nvx-avatar-group-glass .nvx-avatar,
[data-theme="dark"] .modal-content .nvx-avatar-group-glass-modal .nvx-avatar,
[data-theme="dark"] .dashboard-widget .nvx-avatar-group-glass-widget .nvx-avatar {
  background: var(--nvx-glass-bg-dark, rgba(0,0,0,0.3));
  border-color: var(--nvx-glass-border-dark, rgba(255,255,255,0.15));
  box-shadow: var(--nvx-glass-shadow-dark, 0 8px 32px 0 rgba(0,0,0,0.4));
  color: var(--nvx-color-text-main-dark, #f8fafc);
}

/* System dark theme fallback */
@media (prefers-color-scheme: dark) {
  .hero-section .nvx-avatar-group-glass:not([data-theme]) .nvx-avatar,
  .welcome-area .nvx-avatar-group-glass:not([data-theme]) .nvx-avatar {
    background: var(--nvx-glass-bg-dark, rgba(0,0,0,0.3));
    border-color: var(--nvx-glass-border-dark, rgba(255,255,255,0.15));
    box-shadow: var(--nvx-glass-shadow-dark, 0 8px 32px 0 rgba(0,0,0,0.4));
  }
}

/* Glass fallback for browsers without backdrop-filter */
@supports not (backdrop-filter: blur(12px)) {
  .hero-section .nvx-avatar-group-glass .nvx-avatar,
  .welcome-area .nvx-avatar-group-glass .nvx-avatar,
  .premium-user .nvx-avatar-group-glass-vip .nvx-avatar,
  .modal-content .nvx-avatar-group-glass-modal .nvx-avatar {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background: rgba(255, 255, 255, 0.9);
  }
  [data-theme="dark"] .hero-section .nvx-avatar-group-glass .nvx-avatar,
  [data-theme="dark"] .welcome-area .nvx-avatar-group-glass .nvx-avatar {
    background: rgba(30, 41, 59, 0.9);
  }
}

/* ===================================== */
/* TOOLTIP SYSTEM                         */
/* ===================================== */
.nvx-avatar-group .nvx-avatar[data-tooltip] {
  cursor: help;
}
.nvx-avatar-group .nvx-avatar[data-tooltip]::before {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%) translateY(-8px);
  padding: 0.5rem 0.75rem;
  background: var(--nvx-avatar-tooltip-bg);
  color: var(--nvx-avatar-tooltip-color);
  font-size: var(--nvx-text-xs, 0.75rem);
  font-weight: normal;
  white-space: normal;
  max-width: 200px;
  text-align: center;
  border-radius: var(--nvx-radius-md, 6px);
  box-shadow: var(--nvx-shadow-lg, 0 10px 15px -3px rgba(0,0,0,0.1));
  pointer-events: none;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.2s ease, transform 0.2s ease, visibility 0.2s;
  z-index: var(--nvx-z-tooltip);
}
.nvx-avatar-group .nvx-avatar[data-tooltip]::after {
  content: '';
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%) translateY(0);
  border-width: var(--nvx-avatar-tooltip-arrow-size);
  border-style: solid;
  border-color: var(--nvx-avatar-tooltip-bg) transparent transparent transparent;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.2s ease, transform 0.2s ease, visibility 0.2s;
}
.nvx-avatar-group .nvx-avatar[data-tooltip]:hover::before,
.nvx-avatar-group .nvx-avatar[data-tooltip]:focus::before,
.nvx-avatar-group .nvx-avatar[data-tooltip]:hover::after,
.nvx-avatar-group .nvx-avatar[data-tooltip]:focus::after {
  opacity: 1;
  visibility: visible;
  transform: translateX(-50%) translateY(-4px);
}

/* Glass tooltip */
.hero-section .nvx-avatar-group-glass .nvx-avatar[data-tooltip]::before,
.welcome-area .nvx-avatar-group-glass .nvx-avatar[data-tooltip]::before {
  background: var(--nvx-glass-bg);
  backdrop-filter: var(--nvx-glass-blur);
  -webkit-backdrop-filter: var(--nvx-glass-blur);
  border: 1px solid var(--nvx-glass-border);
  color: var(--nvx-color-text-main);
}
.hero-section .nvx-avatar-group-glass .nvx-avatar[data-tooltip]::after {
  border-top-color: var(--nvx-glass-bg);
}

/* RTL tooltip */
[dir="rtl"] .nvx-avatar-group .nvx-avatar[data-tooltip]::before,
[dir="rtl"] .nvx-avatar-group .nvx-avatar[data-tooltip]::after {
  left: auto;
  right: 50%;
  transform: translateX(50%) translateY(-8px);
}
[dir="rtl"] .nvx-avatar-group .nvx-avatar[data-tooltip]:hover::before,
[dir="rtl"] .nvx-avatar-group .nvx-avatar[data-tooltip]:focus::before,
[dir="rtl"] .nvx-avatar-group .nvx-avatar[data-tooltip]:hover::after,
[dir="rtl"] .nvx-avatar-group .nvx-avatar[data-tooltip]:focus::after {
  transform: translateX(50%) translateY(-4px);
}

/* ===================================== */
/* SELECTED STATE                         */
/* ===================================== */
.nvx-avatar-group .nvx-avatar.selected,
.nvx-avatar-group .nvx-avatar[aria-selected="true"] {
  outline: 3px solid var(--nvx-color-brand-primary, #3b82f6);
  outline-offset: 2px;
  transform: scale(1.1);
  z-index: var(--nvx-z-hover);
}

/* ===================================== */
/* ANIMATION VARIANTS                     */
/* ===================================== */
@keyframes nvxAvatarFadeIn {
  from { opacity: 0; transform: scale(0.9); }
  to { opacity: 1; transform: scale(1); }
}
@keyframes nvxAvatarPopIn {
  0% { opacity: 0; transform: scale(0.5); }
  70% { transform: scale(1.1); }
  100% { opacity: 1; transform: scale(1); }
}
@keyframes nvxAvatarSlideIn {
  from { opacity: 0; transform: translateX(-20px); }
  to { opacity: 1; transform: translateX(0); }
}

.nvx-avatar-group-animate-fade .nvx-avatar {
  animation: nvxAvatarFadeIn 0.3s ease;
  animation-fill-mode: both;
}
.nvx-avatar-group-animate-pop .nvx-avatar {
  animation: nvxAvatarPopIn 0.4s var(--nvx-ease-bounce);
  animation-fill-mode: both;
}
.nvx-avatar-group-animate-slide .nvx-avatar {
  animation: nvxAvatarSlideIn 0.3s ease;
  animation-fill-mode: both;
}
.nvx-avatar-group-animate-stagger .nvx-avatar {
  animation: nvxAvatarFadeIn 0.3s ease forwards;
  opacity: 0;
}
.nvx-avatar-group-animate-stagger .nvx-avatar:nth-child(1) { animation-delay: 0.05s; }
.nvx-avatar-group-animate-stagger .nvx-avatar:nth-child(2) { animation-delay: 0.1s; }
.nvx-avatar-group-animate-stagger .nvx-avatar:nth-child(3) { animation-delay: 0.15s; }
.nvx-avatar-group-animate-stagger .nvx-avatar:nth-child(4) { animation-delay: 0.2s; }
.nvx-avatar-group-animate-stagger .nvx-avatar:nth-child(5) { animation-delay: 0.25s; }
.nvx-avatar-group-animate-stagger .nvx-avatar:nth-child(n+6) { animation-delay: 0.3s; }

/* ===================================== */
/* LOADING STATE                          */
/* ===================================== */
@keyframes nvxAvatarShimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}
.nvx-avatar-group .nvx-avatar.is-loading {
  position: relative;
  overflow: hidden;
}
.nvx-avatar-group .nvx-avatar.is-loading::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    var(--nvx-avatar-loading-shimmer-color, rgba(255,255,255,0.2)),
    transparent
  );
  animation: nvxAvatarShimmer 1.5s infinite;
}

/* ===================================== */
/* DARK THEME                             */
/* ===================================== */
[data-theme="dark"] .nvx-avatar-group .nvx-avatar,
[data-theme="dark"] .nvx-avatar-group .nvx-avatar-count {
  border-color: var(--nvx-avatar-border-color-dark);
}
@media (prefers-color-scheme: dark) {
  .nvx-avatar-group:not([data-theme]) .nvx-avatar,
  .nvx-avatar-group:not([data-theme]) .nvx-avatar-count {
    border-color: var(--nvx-avatar-border-color-dark);
  }
}

/* ===================================== */
/* RTL CORE                               */
/* ===================================== */
[dir="rtl"] .nvx-avatar-group .nvx-avatar {
  margin-inline-end: 0;
  margin-inline-start: var(--nvx-avatar-group-gap);
}
[dir="rtl"] .nvx-avatar-group .nvx-avatar:last-child {
  margin-inline-start: 0;
}
[dir="rtl"] .nvx-avatar-group .nvx-avatar-count {
  margin-inline-start: 0;
}
[dir="rtl"] .nvx-avatar-group-vertical .nvx-avatar {
  margin-inline-start: 0;
}

/* ===================================== */
/* RESPONSIVE & TOUCH                     */
/* ===================================== */
@media (max-width: 768px) {
  .nvx-avatar-group {
    --nvx-avatar-size: calc(var(--nvx-avatar-size) * 0.9);
  }
  .nvx-avatar-group-sm {
    --nvx-avatar-size: calc(var(--nvx-avatar-size-sm) * 0.9);
  }
  .nvx-avatar-group-lg {
    --nvx-avatar-size: calc(var(--nvx-avatar-size-lg) * 0.9);
  }
  .nvx-avatar-group-xl {
    --nvx-avatar-size: calc(var(--nvx-avatar-size-xl) * 0.9);
  }
  
  /* Mobile glass optimization */
  .hero-section .nvx-avatar-group-glass .nvx-avatar,
  .welcome-area .nvx-avatar-group-glass .nvx-avatar,
  .modal-content .nvx-avatar-group-glass-modal .nvx-avatar {
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
}
@media (max-width: 480px) {
  .nvx-avatar-group-hide-count-mobile .nvx-avatar-count {
    display: none;
  }
  
  /* Turn off glass on mobile for performance */
  .hero-section .nvx-avatar-group-glass .nvx-avatar,
  .welcome-area .nvx-avatar-group-glass .nvx-avatar,
  .modal-content .nvx-avatar-group-glass-modal .nvx-avatar,
  .dashboard-widget .nvx-avatar-group-glass-widget .nvx-avatar {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background: rgba(255, 255, 255, 0.9);
  }
  [data-theme="dark"] .hero-section .nvx-avatar-group-glass .nvx-avatar,
  [data-theme="dark"] .welcome-area .nvx-avatar-group-glass .nvx-avatar {
    background: rgba(30, 41, 59, 0.9);
  }
}
@media (hover: none) and (pointer: coarse) {
  .nvx-avatar-group .nvx-avatar,
  .nvx-avatar-group .nvx-avatar-count {
    min-width: 44px;
    min-height: 44px;
    transition: none;
  }
  .nvx-avatar-group .nvx-avatar:hover,
  .nvx-avatar-group .nvx-avatar-count:hover {
    transform: none;
  }
}

/* ===================================== */
/* ACCESSIBILITY                          */
/* ===================================== */
@media (prefers-reduced-motion: reduce) {
  .nvx-avatar-group .nvx-avatar,
  .nvx-avatar-group .nvx-avatar-count,
  .nvx-avatar-group .nvx-avatar[data-tooltip]::before,
  .nvx-avatar-group .nvx-avatar[data-tooltip]::after,
  .nvx-avatar-group .nvx-avatar.is-loading::after,
  .hero-section .nvx-avatar-group-glass .nvx-avatar,
  .premium-user .nvx-avatar-group-glass-vip .nvx-avatar,
  .achievement-badge .nvx-avatar-group-glass-achievement .nvx-avatar {
    transition: none !important;
    animation: none !important;
  }
  .nvx-avatar-group .nvx-avatar:hover,
  .nvx-avatar-group .nvx-avatar-count:hover,
  .hero-section .nvx-avatar-group-glass .nvx-avatar:hover,
  .cta-section .nvx-avatar-group-glass-cta .nvx-avatar:hover {
    transform: none !important;
  }
}
@media (prefers-contrast: high) {
  .nvx-avatar-group .nvx-avatar,
  .nvx-avatar-group .nvx-avatar-count {
    border: 3px solid CanvasText;
    outline: 1px solid Canvas;
  }
  .hero-section .nvx-avatar-group-glass .nvx-avatar,
  .welcome-area .nvx-avatar-group-glass .nvx-avatar {
    background: Canvas !important;
    backdrop-filter: none !important;
    border: 3px solid CanvasText;
  }
}
@media (forced-colors: active) {
  .nvx-avatar-group .nvx-avatar,
  .nvx-avatar-group .nvx-avatar-count {
    forced-color-adjust: none;
    border: 2px solid ButtonText;
  }
  .nvx-avatar-group .nvx-avatar-count {
    background: Highlight;
    color: HighlightText;
  }
  .nvx-avatar .nvx-avatar-status {
    border: 2px solid ButtonText;
    background: ButtonText !important;
  }
  .hero-section .nvx-avatar-group-glass .nvx-avatar {
    background: Canvas !important;
    border: 2px solid ButtonText;
    forced-color-adjust: none;
  }
}

/* ===================================== */
/* PRINT STYLES                           */
/* ===================================== */
@media print {
  .nvx-avatar-group .nvx-avatar,
  .nvx-avatar-group .nvx-avatar-count {
    border: 2px solid #000 !important;
    box-shadow: none !important;
    background: #fff !important;
    color: #000 !important;
  }
  .nvx-avatar-group .nvx-avatar-count {
    background: #000 !important;
    color: #fff !important;
  }
  .nvx-avatar-group .nvx-avatar img {
    filter: grayscale(1);
  }
  .nvx-avatar-group .nvx-avatar[data-tooltip]::before,
  .nvx-avatar-group .nvx-avatar[data-tooltip]::after,
  .hero-section .nvx-avatar-group-glass .nvx-avatar {
    backdrop-filter: none !important;
    background: #fff !important;
  }
}

/* ===================================== */
/* IE11 FALLBACK                          */
/* ===================================== */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  .nvx-avatar-group .nvx-avatar {
    margin-right: var(--nvx-avatar-group-gap);
  }
  [dir="rtl"] .nvx-avatar-group .nvx-avatar {
    margin-right: 0;
    margin-left: var(--nvx-avatar-group-gap);
  }
  .nvx-avatar-group .nvx-avatar:last-child {
    margin-right: 0;
  }
  [dir="rtl"] .nvx-avatar-group .nvx-avatar:last-child {
    margin-left: 0;
  }
  .nvx-avatar-group .nvx-avatar-count {
    margin-right: 0;
  }
  .nvx-avatar-group .nvx-avatar[data-tooltip]::before,
  .nvx-avatar-group .nvx-avatar[data-tooltip]::after {
    display: none;
  }
  .hero-section .nvx-avatar-group-glass .nvx-avatar {
    background: rgba(255, 255, 255, 0.9);
  }
}

/* ===================================== */
/* API REFERENCE                          */
/* ===================================== */
/**
 * =====================================
 * üìò NEVOX AVATAR GROUP ‚Äì API REFERENCE
 * =====================================
 * 
 * ‚úÖ Container classes:
 *   .nvx-avatar-group                  ‚Äì Base group
 *   .nvx-avatar-group-sm                ‚Äì Small size
 *   .nvx-avatar-group-lg                ‚Äì Large size
 *   .nvx-avatar-group-xl                ‚Äì Extra large size
 *   .nvx-avatar-group-grid               ‚Äì Grid layout (4 columns)
 *   .nvx-avatar-group-vertical           ‚Äì Vertical stack
 *   .nvx-avatar-group-spaced             ‚Äì No overlap, with gap
 *   .nvx-avatar-group-centered           ‚Äì Center alignment
 *   .nvx-avatar-group-borderless         ‚Äì No border, only shadow
 *   .nvx-avatar-group-ring-*              ‚Äì Primary/secondary/success/warning/error/double
 *   .nvx-avatar-group-animate-*           ‚Äì fade/pop/slide/stagger animations
 *   .nvx-avatar-group-hide-count-mobile   ‚Äì Hide count on small screens
 *   .nvx-avatar-group-max-5 / max[data-max] ‚Äì Show at most N avatars
 *
 * ‚úÖ Strategic Glass Mode (use with parent container):
 *   .hero-section .nvx-avatar-group-glass        ‚Äì Hero area
 *   .premium-user .nvx-avatar-group-glass-vip    ‚Äì VIP users
 *   .featured-content .nvx-avatar-group-glass-featured ‚Äì Featured
 *   .modal-content .nvx-avatar-group-glass-modal ‚Äì Modals
 *   .dashboard-widget .nvx-avatar-group-glass-widget ‚Äì Dashboard
 *   .achievement-badge .nvx-avatar-group-glass-achievement ‚Äì Achievements
 *   .cta-section .nvx-avatar-group-glass-cta     ‚Äì Call to action
 *
 * ‚úÖ Avatar element (.nvx-avatar):
 *   data-status="online/busy/away/offline"  ‚Äì Shows status dot
 *   data-tooltip="text"                      ‚Äì Shows tooltip
 *   class="is-loading"                        ‚Äì Shimmer loading effect
 *   class="selected" or aria-selected="true" ‚Äì Selected state
 *
 * ‚úÖ Status element:
 *   <span class="nvx-avatar-status"></span> ‚Äì Inside .nvx-avatar
 *
 * ‚úÖ Count element (.nvx-avatar-count):
 *   data-count="99" ‚Äì Adjusts font size automatically
 *
 * ‚úÖ RTL support: dir="rtl" on parent
 * ‚úÖ Dark mode: data-theme="dark" or prefers-color-scheme
 */

/* ===================================== */
/* EXAMPLE HTML                           */
/* ===================================== */
/*
  <!-- ‡¶¨‡ßá‡¶∏‡¶ø‡¶ï ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™ -->
  <div class="nvx-avatar-group" role="group" aria-label="Team members">
    <div class="nvx-avatar" tabindex="0" role="img" aria-label="User 1" data-tooltip="John Doe">
      <img src="avatar1.jpg" alt="User 1">
    </div>
    <div class="nvx-avatar" tabindex="0" role="img" aria-label="User 2" data-status="online">
      <img src="avatar2.jpg" alt="User 2">
      <span class="nvx-avatar-status"></span>
    </div>
    <span class="nvx-avatar-count" data-count="8" aria-label="8 more team members">+8</span>
  </div>

  <!-- ‡¶π‡¶ø‡¶∞‡ßã ‡¶∏‡ßá‡¶ï‡¶∂‡¶®‡ßá ‡¶ó‡ßç‡¶≤‡¶æ‡¶∏ ‡¶Æ‡ßã‡¶° -->
  <div class="hero-section">
    <div class="nvx-avatar-group nvx-avatar-group-glass nvx-avatar-group-lg nvx-avatar-group-ring-primary">
      <div class="nvx-avatar" data-tooltip="Founder">
        <img src="ceo.jpg" alt="CEO">
      </div>
      <div class="nvx-avatar" data-tooltip="CTO" data-status="online">
        <img src="cto.jpg" alt="CTO">
        <span class="nvx-avatar-status"></span>
      </div>
      <span class="nvx-avatar-count">+12</span>
    </div>
  </div>

  <!-- ‡¶≠‡¶ø‡¶Ü‡¶á‡¶™‡¶ø ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ -->
  <div class="premium-user">
    <div class="nvx-avatar-group nvx-avatar-group-glass-vip nvx-avatar-group-ring-double">
      <div class="nvx-avatar" data-tooltip="VIP User">
        <img src="vip.jpg" alt="VIP">
      </div>
    </div>
  </div>
*/

/* ===================================== */
/* NEVOX AVATAR GROUP v4.1 ‚Äì COMPLETE     */
/* ENTERPRISE-GRADE ‚Ä¢ FULLY ACCESSIBLE    */
/* 100% PRODUCTION READY                  */
/* ===================================== */
