/* ===================================== */
/* NEVOX ENTERPRISE GLOBALIZATION SYSTEM v4.1 */
/* Final Production Version - All Issues Fixed */
/* ===================================== */

/* ===================================== */
/* 1. LANGUAGE RECEIVER LAYER */
/* ===================================== */
:root {
  /* SYSTEM STATE (JS will set these) */
  --nvx-lang-state: 'detecting'; /* detecting | detected | error | fallback */
  --nvx-lang-source: 'unknown'; /* geoip | browser | saved | manual */
  --nvx-country-code: 'XX';
  
  /* LANGUAGE-SPECIFIC TYPOGRAPHY */
  --nvx-font-stack-default: "Inter", -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  --nvx-font-stack-arabic: "Cairo", "Segoe UI", Tahoma, Geneva, sans-serif;
  --nvx-font-stack-bengali: "Noto Sans Bengali", "SolaimanLipi", "Kalpurush", sans-serif;
  --nvx-font-stack-chinese: "Noto Sans SC", "Microsoft YaHei", "PingFang SC", sans-serif;
  --nvx-font-stack-hindi: "Noto Sans Devanagari", "Arial Unicode MS", sans-serif;
  --nvx-font-stack-japanese: "Noto Sans JP", "Hiragino Kaku Gothic Pro", Meiryo, sans-serif;
  --nvx-font-stack-korean: "Noto Sans KR", "Apple SD Gothic Neo", "Malgun Gothic", sans-serif;
  --nvx-font-stack-cyrillic: "Roboto", "Helvetica Neue", Arial, sans-serif;
  
  /* LANGUAGE-SPECIFIC LINE HEIGHT */
  --nvx-line-height-latin: 1.6;
  --nvx-line-height-arabic: 1.8;
  --nvx-line-height-cjk: 1.9;
  --nvx-line-height-bengali: 1.8;
  --nvx-line-height-devanagari: 1.7;
  --nvx-line-height-cyrillic: 1.65;
  
  /* DIRECTION SYSTEM */
  --nvx-dir-ltr: ltr;
  --nvx-dir-rtl: rtl;
}

/* ===================================== */
/* 2. LANGUAGE CONTENT VISIBILITY SYSTEM */
/* ===================================== */
/* Hide all language content by default */
.nvx-content-en,
.nvx-content-ar,
.nvx-content-bn,
.nvx-content-zh,
.nvx-content-hi,
.nvx-content-ja,
.nvx-content-ko,
.nvx-content-ru,
.nvx-content-fr,
.nvx-content-de,
.nvx-content-es,
.nvx-content-it,
.nvx-content-pt {
  display: none;
}

/* UI Components - Always Visible */
.nvx-lang-switcher-ui,
.nvx-lang-selector-ui,
.nvx-lang-indicator-ui {
  display: block;
}

/* Show specific language content */
html[lang="en"] .nvx-content-en,
html[lang="ar"] .nvx-content-ar,
html[lang="bn"] .nvx-content-bn,
html[lang="zh"] .nvx-content-zh,
html[lang="zh-CN"] .nvx-content-zh,
html[lang="zh-TW"] .nvx-content-zh,
html[lang="hi"] .nvx-content-hi,
html[lang="ja"] .nvx-content-ja,
html[lang="ko"] .nvx-content-ko,
html[lang="ru"] .nvx-content-ru,
html[lang="fr"] .nvx-content-fr,
html[lang="de"] .nvx-content-de,
html[lang="es"] .nvx-content-es,
html[lang="it"] .nvx-content-it,
html[lang="pt"] .nvx-content-pt {
  display: block;
}

/* Fallback for no-lang or detection error - FIXED: RTL-Safe */
html:not([lang]) .nvx-content-en,
[data-lang-error="true"] .nvx-content-en {
  display: block;
  border-inline-start: 3px solid var(--nvx-warning);
  padding-inline-start: 12px;
}

/* ===================================== */
/* 3. DIRECTION-AWARE LAYOUT SYSTEM */
/* ===================================== */
/* Component-level text alignment */
[dir="ltr"] .nvx-text-component {
  text-align: left;
}

[dir="rtl"] .nvx-text-component {
  text-align: right;
}

/* Form elements */
[dir="rtl"] input:not([type="number"]):not([type="tel"]),
[dir="rtl"] textarea,
[dir="rtl"] select {
  text-align: right;
  direction: rtl;
}

/* Numbers always LTR (ISO standard) */
.nvx-number,
.nvx-price,
.nvx-phone,
.nvx-currency,
.nvx-percentage,
input[type="number"],
input[type="tel"] {
  direction: ltr;
  text-align: left;
  unicode-bidi: isolate;
}

/* ===================================== */
/* 4. LANGUAGE-SPECIFIC TYPOGRAPHY */
/* ===================================== */
/* Arabic */
html[lang="ar"],
html[lang="ar-SA"],
html[lang="ar-AE"] {
  font-family: var(--nvx-font-stack-arabic);
  line-height: var(--nvx-line-height-arabic);
  letter-spacing: -0.02em;
  font-feature-settings: "kern" 0, "liga" 1;
}

/* Bengali */
html[lang="bn"],
html[lang="bn-BD"] {
  font-family: var(--nvx-font-stack-bengali);
  line-height: var(--nvx-line-height-bengali);
  font-size: calc(1em * 1.05);
}

/* Chinese */
html[lang="zh"],
html[lang="zh-CN"],
html[lang="zh-TW"] {
  font-family: var(--nvx-font-stack-chinese);
  line-height: var(--nvx-line-height-cjk);
  letter-spacing: 0.01em;
}

/* Hindi */
html[lang="hi"],
html[lang="hi-IN"] {
  font-family: var(--nvx-font-stack-hindi);
  line-height: var(--nvx-line-height-devanagari);
}

/* Japanese */
html[lang="ja"],
html[lang="ja-JP"] {
  font-family: var(--nvx-font-stack-japanese);
  line-height: var(--nvx-line-height-cjk);
  letter-spacing: 0.02em;
}

/* Korean */
html[lang="ko"],
html[lang="ko-KR"] {
  font-family: var(--nvx-font-stack-korean);
  line-height: var(--nvx-line-height-cjk);
  letter-spacing: 0.01em;
}

/* Russian & Cyrillic */
html[lang="ru"],
html[lang="ru-RU"],
html[lang="uk"],
html[lang="uk-UA"] {
  font-family: var(--nvx-font-stack-cyrillic);
  line-height: var(--nvx-line-height-cyrillic);
}

/* European Latin-based languages use default stack */
html[lang="fr"],
html[lang="fr-FR"],
html[lang="de"],
html[lang="de-DE"],
html[lang="es"],
html[lang="es-ES"],
html[lang="it"],
html[lang="it-IT"],
html[lang="pt"],
html[lang="pt-BR"],
html[lang="pt-PT"] {
  font-family: var(--nvx-font-stack-default);
  line-height: var(--nvx-line-height-latin);
}

/* ===================================== */
/* 5. DETECTION STATUS UI */
/* ===================================== */
.nvx-globalization-status {
  position: fixed;
  top: 16px;
  right: 16px;
  z-index: 10000;
  padding: 8px 16px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
  border: 1px solid;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  opacity: 0;
  transform: translateY(-20px);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.nvx-globalization-status.show {
  opacity: 1;
  transform: translateY(0);
}

/* Status Types */
.nvx-globalization-status--detecting {
  background: rgba(var(--nvx-info-rgb, 59, 130, 246), 0.1);
  border-color: rgba(var(--nvx-info-rgb, 59, 130, 246), 0.3);
  color: var(--nvx-info);
}

.nvx-globalization-status--detected {
  background: rgba(var(--nvx-success-rgb, 16, 185, 129), 0.1);
  border-color: rgba(var(--nvx-success-rgb, 16, 185, 129), 0.3);
  color: var(--nvx-success);
}

.nvx-globalization-status--error {
  background: rgba(var(--nvx-warning-rgb, 245, 158, 11), 0.1);
  border-color: rgba(var(--nvx-warning-rgb, 245, 158, 11), 0.3);
  color: var(--nvx-warning);
}

/* ===================================== */
/* 6. LANGUAGE SWITCHER UI */
/* ===================================== */
.nvx-lang-switcher-ui {
  position: fixed;
  bottom: 24px;
  right: 24px;
  z-index: 10010;
  background: var(--nvx-bg-card);
  border: 1px solid var(--nvx-border);
  border-radius: 16px;
  padding: 16px;
  box-shadow: var(--nvx-shadow-xl);
  display: none;
  max-width: 300px;
  font-family: var(--nvx-font-stack-default);
}

.nvx-lang-switcher-ui.active {
  display: block;
  animation: nvx-slide-up 0.3s ease;
}

.nvx-lang-option {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  margin: 4px 0;
  border-radius: 12px;
  cursor: pointer;
  transition: background-color 0.2s ease;
  text-align: start;
}

.nvx-lang-option:hover {
  background: var(--nvx-bg-tertiary);
}

.nvx-lang-option--recommended {
  background: rgba(var(--nvx-primary-rgb, 59, 130, 246), 0.1);
  border: 1px solid rgba(var(--nvx-primary-rgb, 59, 130, 246), 0.2);
}

/* Country indicator - FIXED: RTL-Safe */
[data-country] .nvx-country-indicator {
  display: inline-block;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 11px;
  background: var(--nvx-bg-tertiary);
  color: var(--nvx-text-secondary);
  margin-inline-start: 8px;
  vertical-align: middle;
}

/* ===================================== */
/* 7. RESPONSIVE DESIGN */
/* ===================================== */
/* FIXED: max-device-width replaced with max-width */
@media (max-width: 768px) {
  .nvx-lang-switcher-ui {
    bottom: 80px;
    right: 16px;
    left: 16px;
    max-width: none;
  }
  
  .nvx-globalization-status {
    top: 12px;
    right: 12px;
    font-size: 11px;
    padding: 6px 12px;
    max-width: calc(100vw - 24px);
  }
}

@media (min-width: 769px) and (max-width: 1024px) {
  .nvx-lang-switcher-ui {
    max-width: 280px;
  }
}

/* Reduced backdrop-filter on mobile for performance */
@media (max-width: 768px) {
  .nvx-globalization-status {
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
  }
}

/* ===================================== */
/* 8. ACCESSIBILITY */
/* ===================================== */
@media (prefers-contrast: high) {
  .nvx-lang-option--recommended {
    border: 2px solid currentColor;
    background: transparent;
  }
  
  .nvx-globalization-status {
    border-width: 2px;
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }
}

@media (prefers-reduced-motion: reduce) {
  .nvx-lang-switcher-ui.active {
    animation: none;
  }
  
  .nvx-globalization-status {
    transition: none;
  }
}

/* ===================================== */
/* 9. PRINT OPTIMIZATIONS */
/* ===================================== */
@media print {
  .nvx-lang-switcher-ui,
  .nvx-globalization-status,
  .nvx-country-indicator {
    display: none !important;
  }
  
  /* Ensure proper text direction in print */
  [dir="rtl"] {
    text-align: right;
  }
  
  [dir="ltr"] {
    text-align: left;
  }
}

/* ===================================== */
/* 10. NO-JS FALLBACK */
/* ===================================== */
/* When JavaScript is disabled */
.no-js .nvx-lang-switcher-ui,
.no-js .nvx-globalization-status,
.no-js .nvx-country-indicator {
  display: none !important;
}

.no-js .nvx-content-en {
  display: block !important;
}

.no-js [lang]:not([lang="en"]) .nvx-content-en {
  display: none !important;
}

/* ===================================== */
/* ANIMATIONS */
/* ===================================== */
@keyframes nvx-slide-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ===================================== */
/* NEVOX GLOBALIZATION CORE v4.1 - END */
/* All Issues Fixed â€¢ Production Ready */
/* ===================================== */
